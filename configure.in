AC_INIT(gnomine)

AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(gnome-games, 0.99.8)
AM_MAINTAINER_MODE
AM_ACLOCAL_INCLUDE(macros)
GNOME_INIT

AC_ISC_POSIX
AC_PROG_CC
AC_STDC_HEADERS
AC_ARG_PROGRAM
AM_PROG_LIBTOOL

## failure of 'AC_PRG_CXX' causes automake to abort
# see if a C++ compiler exists and works
AC_REQUIRE([AC_PROG_CXX])dnl
if test "x$ac_cv_prog_cxx_works" = xno; then
  AC_MSG_WARN(ifelse([$1], , "No C++ compiler", [$1]))
fi
AM_CONDITIONAL(CXX_PRESENT, test "x$ac_cv_prog_cxx_works" != xno)

## this should come after `AC_PROG_CC'
GNOME_X_CHECKS
GNOME_CHECK_GUILE

## look for some version of curses (keeping AM_'s out of curses.m4)
AC_CHECK_CURSES
AM_CONDITIONAL(HAS_CURSES, test "$has_curses" = true)

ALL_LINGUAS="cs da de es fi fr ga it ja ko no pt pl ru"
AM_GNOME_GETTEXT

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)

AM_CONDITIONAL(HAVE_JADE, false)

gnome_cv_use_gnome=yes

## gnomine checks
oLIBS="$LIBS"
LIBS="$LIBS $GTK_LIBS"
AC_CHECK_FUNCS(gtk_spin_button_set_snap_to_ticks)
LIBS="$oLIBS"

AC_CHECK_FUNCS(rename)

dnl
dnl ScottFree check
dnl
ZVT_LIBS=`$GNOME_CONFIG --libs zvt`
AC_SUBST(ZVT_LIBS)

AC_OUTPUT([
Makefile
po/Makefile.in
macros/Makefile
idl/Makefile
gnomine/Makefile
scottfree/Makefile
same-gnome/Makefile
same-gnome/help/Makefile
same-gnome/help/C/Makefile
mahjongg/Makefile
gturing/Makefile
gturing/help/Makefile
gturing/help/C/Makefile
aisleriot/Makefile
aisleriot/docs/Makefile
aisleriot/pixmaps/Makefile
freecell/Makefile
freecell/src/Makefile
freecell/gdk-card-image/Makefile
gnome-stones/Makefile
gnome-stones/graphics/Makefile
gnome-stones/objects/Makefile
gyahtzee/Makefile
gyahtzee/pix/Makefile
gnobots/Makefile
gnobots/help/Makefile
gnobots/help/C/Makefile
gnobots/help/es/Makefile
gnobots2/Makefile
gnobots2/help/Makefile
gnobots2/help/C/Makefile
gnobots2/help/es/Makefile
gnothello/Makefile
gnibbles/Makefile
gnotravex/Makefile
metatris/Makefile
gnometris/Makefile 
gnometris/pix/Makefile
])
