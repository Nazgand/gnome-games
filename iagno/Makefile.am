pixmapdir=$(datadir)/pixmaps/iagno
Gamesdir = $(datadir)/applications

INCLUDES =						\
	-I$(top_srcdir)/libgames-support		\
	$(WARN_CFLAGS)					\
	$(GNOME_GAMES_CFLAGS)				\
	-DDATADIR=\""$(datadir)"\"		   	\
	-DGNOMELOCALEDIR=\""$(datadir)/locale"\"	\
	@LIBGGZ_INCLUDES@ @GGZDMOD_INCLUDES@ @GGZ_GTK_INCLUDES@

if GGZ_SERVER
bin_PROGRAMS = iagno iagnod
iagnod_SOURCES = server.h   \
		 server.c   

iagnod_LDFLAGS = @GGZDMOD_LDFLAGS@

iagnod_LDADD = \
	$(GNOME_GAMES_LIBS)     \
	$(INTLLIBS) 		\
	@LIB_GGZDMOD@

else
bin_PROGRAMS = iagno 
endif

if GGZ_CLIENT
GGZ_FILES =	ggz-network.h \
		ggz-network.c \
		$(NULL)
endif

iagno_SOURCES = \
	gnothello.c \
	gnothello.h \
	othello.c \
	othello.h \
	properties.c \
	properties.h \
	$(GGZ_FILES)

iagno_LDFLAGS = $(GGZMOD_LDFLAGS)

iagno_LDADD = \
	../libgames-support/libgames-support.la \
	$(GNOME_GAMES_LIBS) \
	$(INTLLIBS) \
	$(LIB_GGZMOD) \
	$(LIB_GGZ_GTK)

pixmap_DATA = \
	classic.png \
	woodtrim.png

icon16dir = $(datadir)/icons/hicolor/16x16/apps/
icon16_DATA = 16x16/gnome-iagno.png
icon22dir = $(datadir)/icons/hicolor/22x22/apps/
icon22_DATA = 22x22/gnome-iagno.png
icon32dir = $(datadir)/icons/hicolor/32x32/apps/
icon32_DATA = 32x32/gnome-iagno.png
icon48dir = $(datadir)/icons/hicolor/48x48/apps/
icon48_DATA = 48x48/gnome-iagno.png
svgicondir = $(datadir)/icons/hicolor/scalable/apps/
svgicon_DATA = scalable/gnome-iagno.svg

Games_in_files = iagno.desktop.in
Games_DATA = $(Games_in_files:.desktop.in=.desktop)
@INTLTOOL_DESKTOP_RULE@

schemadir   = @GCONF_SCHEMA_FILE_DIR@
schema_in_files = iagno.schemas.in
schema_DATA = $(schema_in_files:.schemas.in=.schemas)
@INTLTOOL_SCHEMAS_RULE@

EXTRA_DIST = \
	AUTHORS \
	iagno-client.dsc.in \
	iagno-server.dsc.in \
        iagno.room          \
	iagno.desktop.in 	\
	iagno.soundlist.in \
	$(pixmap_DATA)	\
	$(icon16_DATA)	\
	$(icon22_DATA)	\
	$(icon32_DATA)	\
	$(icon48_DATA)	\
	$(svgicon_DATA) \
	$(schema_in_files)

install-data-local:
if GCONF_SCHEMAS_INSTALL
	GCONF_CONFIG_SOURCE=$(GCONF_SCHEMA_CONFIG_SOURCE) $(GCONFTOOL) --makefile-install-rule $(top_builddir)/iagno/$(schema_DATA)
endif
if GGZ_CLIENT
	$(GGZ_CONFIG) -D --install --modfile=iagno-client.dsc --force
endif
uninstall-local:
if GGZ_CLIENT
	-$(GGZ_CONFIG) -D --remove --modfile=iagno-client.dsc
endif

soundlistdir = $(sysconfdir)/sound/events
soundlist_in_files = iagno.soundlist.in
soundlist_DATA = $(soundlist_in_files:.soundlist.in=.soundlist)
@INTLTOOL_SOUNDLIST_RULE@

SUBDIRS=sounds help

DISTCLEANFILES = $(Games_DATA) $(schema_DATA) $(soundlist_DATA)

if GGZ_SERVER
ggzroom_DATA = iagno.room
ggzroomdir = ${prefix}/etc/ggzd/rooms/

ggzgame_DATA = iagno-server.dsc
ggzgamedir = ${prefix}/etc/ggzd/games/
endif

